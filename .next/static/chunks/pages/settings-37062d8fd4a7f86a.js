(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[662],{578:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/settings",function(){return t(1623)}])},5848:function(e,s,t){"use strict";t.r(s);var a=t(1527);t(959);let i=()=>(0,a.jsxs)("div",{className:"absolute inset-y-0 left-0 -z-10 w-full h-full overflow-hidden ring-1 ring-white/5 lg:w-1/2",children:[(0,a.jsxs)("svg",{className:"absolute inset-0 h-full w-full stroke-gray-700 [mask-image:radial-gradient(100%_100%_at_top_right,white,transparent)]","aria-hidden":"true",children:[(0,a.jsx)("defs",{children:(0,a.jsx)("pattern",{id:"54f88622-e7f8-4f1d-aaf9-c2f5e46dd1f2",width:200,height:200,x:"100%",y:-1,patternUnits:"userSpaceOnUse",children:(0,a.jsx)("path",{d:"M130 200V.5M.5 .5H200",fill:"none"})})}),(0,a.jsx)("svg",{x:"100%",y:-1,className:"overflow-visible fill-gray-800/20",children:(0,a.jsx)("path",{d:"M-470.5 0h201v201h-201Z",strokeWidth:0})}),(0,a.jsx)("rect",{width:"100%",height:"100%",strokeWidth:0,fill:"url(#54f88622-e7f8-4f1d-aaf9-c2f5e46dd1f2)"})]}),(0,a.jsx)("div",{className:"absolute -left-56 top-[calc(100%-13rem)] transform-gpu blur-3xl lg:left-[max(-14rem,calc(100%-59rem))] lg:top-[calc(50%-7rem)]","aria-hidden":"true",children:(0,a.jsx)("div",{className:"aspect-[1155/678] w-[72.1875rem] bg-gradient-to-br from-[#80caff] to-[#4f46e5] opacity-20",style:{clipPath:"polygon(74.1% 56.1%, 100% 38.6%, 97.5% 73.3%, 85.5% 100%, 80.7% 98.2%, 72.5% 67.7%, 60.2% 37.8%, 52.4% 32.2%, 47.5% 41.9%, 45.2% 65.8%, 27.5% 23.5%, 0.1% 35.4%, 17.9% 0.1%, 27.6% 23.5%, 76.1% 2.6%, 74.1% 56.1%)"}})})]});s.default=i},1623:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return p}});var a=t(1527),i=t(959),n=t(4177),l=t(389),r=t(3815),c=t(4740),o=t(4033),m=t(2507),d=t(6073),x=t(8115),u=t(796),g=t(5848);let h=e=>{let{keyName:s,keyValue:t,setKeyValue:i}=e,n=e=>{e.preventDefault(),i(t)},l=e=>{i(e.target.value)};return(0,a.jsx)("form",{onSubmit:n,children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("p",{className:"text-white text-sm font-medium mb-2",children:s.charAt(0).toUpperCase()+s.slice(1)}),(0,a.jsx)("div",{className:"relative",children:(0,a.jsx)("input",{type:"password",value:t,onChange:l,placeholder:{"OpenAI API Key":"sk-...","Pinecone API Key":"05473f56-...","Pinecone region":"us-west-1","Pinecone index name":"index-name"}[s],className:"w-full px-2 py-3 text-sm text-gray-300 placeholder-gray-500 bg-gray-800 border border-gray-700 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})})]})})};function p(){let[e,s]=(0,i.useState)([]),{openAIapiKey:t,pineconeApiKey:p,pineconeEnvironment:f,pineconeIndexName:y,handleKeyChange:b,handleSubmitKeys:j}=(0,r.EX)(),[v,N]=(0,i.useState)(!1),[w,k]=(0,i.useState)(""),[S,C]=(0,i.useState)(""),[P,E]=(0,i.useState)(!1),[_,A]=(0,i.useState)(""),[I,K]=(0,i.useState)(""),[X,O]=(0,i.useState)({message:"",customString:""}),[V,z]=(0,i.useState)([]),[Z,T]=(0,i.useState)(1200),[F,M]=(0,i.useState)(20),[D,U]=(0,i.useState)(""),[L,W]=(0,i.useState)(!1),[Y,B]=(0,i.useState)(!1),H=(0,n.useRouter)(),R=(0,i.useCallback)(async()=>{try{let e=await fetch("/document-chatbot/api/getNamespaces",{headers:{"X-Api-Key":p,"X-Index-Name":y,"X-Environment":f}}),s=await e.json();e.ok?(z(s),O({customString:"",message:""})):O(s.error)}catch(e){O({message:e.message,customString:"An error occured while fetching namespaces"})}},[p,f,y]);(0,i.useEffect)(()=>{v&&R()},[R,v]),(0,i.useEffect)(()=>{N(!1)},[t,p,f,y]);let q=async e=>{try{let s=await fetch("/document-chatbot/api/deleteNamespace?namespace=".concat(e),{method:"DELETE",headers:{"X-Api-Key":p,"X-Index-Name":y,"X-Environment":f}});if(s.ok){let s=V.filter(s=>s!==e);z(s),C("".concat(e," has been successfully deleted."))}else{let e=await s.json();console.log(e.error)}}catch(e){console.log(e),O({message:e.message,customString:"An error occured trying to delete a namespace"})}},{getRootProps:G,getInputProps:J,open:Q}=(0,l.uI)({noClick:!0,noKeyboard:!0,onDrop:e=>{s(e)},multiple:!0}),$=async()=>{if(!e||0===e.length)return;let s=new FormData;for(let t=0;t<e.length;t++)s.append("myfile".concat(t),e[t]);try{let e=await fetch("/api/upload",{method:"POST",body:s});if(e.ok)K("Files uploaded successfully!");else{let s=await e.json();O(s.error)}}catch(e){O({message:e.message,customString:"An error occured trying to upload files"})}},ee=async()=>{try{E(!0);let e=await fetch("/document-chatbot/api/consume?namespaceName=".concat(w,"&chunkSize=").concat(Z,"&overlapSize=").concat(F),{method:"POST",headers:{"X-OpenAI-Key":t,"X-Pinecone-Key":p,"X-Index-Name":y,"X-Environment":f}});if(e.ok){let s=await e.json();A(s.message),setTimeout(()=>{},1e3),R()}else{let s=await e.json();O(s.error)}}catch(e){O({message:e.message,customString:"Error ingesting files"})}E(!1)};return(0,a.jsx)("div",{className:"relative isolate min-h-screen bg-gray-900",children:(0,a.jsxs)("div",{className:"mx-auto grid max-w-7xl grid-cols-1 lg:grid-cols-2",children:[(0,a.jsx)("div",{className:"relative px-6 pb-20 pt-24 sm:pt-32 lg:static lg:px-8 lg:py-48",children:(0,a.jsxs)("div",{className:"mx-auto max-w-xl lg:mx-0 lg:max-w-lg",children:[(0,a.jsx)(g.default,{}),X&&(0,a.jsx)("div",{className:"mt-4 sm:mt-8 flex justify-center mb-4",children:(0,a.jsx)("div",{className:"text-red-500 text-sm sm:text-base font-semibold",children:X.customString})}),(0,a.jsxs)("div",{className:"max-w-xl mx-auto",children:[(0,a.jsxs)("div",{className:"gap-4 grid grid-cols1 sm:grid-cols-2 mb-6",children:[(0,a.jsx)(h,{keyName:"OpenAI API Key",keyValue:t,setKeyValue:e=>b("openAIapiKey",e)}),(0,a.jsx)(h,{keyName:"Pinecone API Key",keyValue:p,setKeyValue:e=>b("pineconeApiKey",e)}),(0,a.jsx)(h,{keyName:"Pinecone region",keyValue:f,setKeyValue:e=>b("pineconeEnvironment",e)}),(0,a.jsx)(h,{keyName:"Pinecone index name",keyValue:y,setKeyValue:e=>b("pineconeIndexName",e)})]}),t&&p&&f&&y&&(0,a.jsx)("button",{type:"button",className:"rounded-md text-white mb-6 mx-auto items-center align-center justify-between flex px-4 sm:px-6 py-1.5 sm:py-2 text-xs sm:text-sm font-semibold focus-visible:outline-indigo-500 shadow-sm ring-1 ring-inset bg-indigo-500 hover:bg-indigo-400",onClick:()=>{j(),N(!0)},children:v?(0,a.jsxs)(a.Fragment,{children:["Your keys have been submitted",(0,a.jsx)(o.Z,{className:"ml-2 h-4 w-4"})]}):"Submit"}),(0,a.jsxs)("div",{className:"flex pt-4 border-t border-white justify-between items-center space-x-2 align-center mb-2",children:[V.length>0?(0,a.jsx)("h2",{className:"mb-4 text-xl text-center sm:text-3xl sm:text-left font-bold text-white",children:"Your namespaces"}):(0,a.jsx)("span",{className:"inline-flex items-center rounded-md bg-red-400/10 px-2 py-1.5 sm:py-2 text-xs sm:text-sm font-medium text-red-400 ring-1 ring-inset ring-red-400/20",children:"No namespaces found"}),(0,a.jsxs)("button",{type:"button",className:"rounded-md items-center align-center justify-between flex bg-white px-4 sm:px-6 py-1.5 sm:py-2 text-xs sm:text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-200",onClick:()=>H.push("/"),children:["Start chatting",(0,a.jsx)(m.Z,{className:"ml-2 -mr-0.5 h-4 w-4","aria-hidden":"true"})]})]}),(0,a.jsx)("ul",{role:"list",className:"grid grid-cols-2 gap-4",children:V.map(e=>(0,a.jsxs)("li",{className:"bg-gray-800/60 rounded-lg shadow px-5 py-4 flex items-center justify-between space-x-4",children:[(0,a.jsx)("div",{className:"flex-1 min-w-0",children:(0,a.jsx)("p",{className:"text-sm font-medium text-white truncate",children:e})}),(0,a.jsx)("div",{className:"flex-shrink-0 flex items-center space-x-2",children:D===e?(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(o.Z,{className:"h-5 w-5 text-green-400 hover:text-green-500 cursor-pointer","aria-hidden":"true",onClick:()=>q(D)}),(0,a.jsx)(d.Z,{className:"h-5 w-5 text-gray-400 hover:text-gray-300 cursor-pointer","aria-hidden":"true",onClick:()=>U("")})]}):(0,a.jsx)(x.Z,{className:"h-5 w-5 text-red-400 hover:text-red-500 cursor-pointer ","aria-hidden":"true",onClick:()=>U(e)})})]},e))}),S&&(0,a.jsx)("p",{className:"mt-6 text-md font-medium text-green-400 text-center",children:S})]})]})}),(0,a.jsx)("div",{className:"px-6 pb-24 pt-20 sm:pb-32 lg:px-8 lg:py-48",children:(0,a.jsxs)("div",{className:"mx-auto max-w-xl lg:mr-0 lg:max-w-lg ",children:[(0,a.jsxs)("h2",{className:"text-2xl sm:text-3xl font-bold tracking-tight text-white",children:[" ","Creating namespaces"]}),(0,a.jsxs)("p",{className:"mt-4 sm:mt-6 text-sm sm:text-lg leading-6 sm:leading-8 text-gray-300",children:[" ","Treat namespaces like topics of conversation. You can create as many as you like, and they can be used to organize your data."]}),(0,a.jsxs)("div",{className:"mt-4 sm:mt-8 flex justify-center",...G(),children:[" ",(0,a.jsxs)("label",{className:"relative block w-full rounded-lg border-2 border-dashed border-gray-300 p-6 sm:p-12 text-center hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 cursor-pointer",children:[" ",(0,a.jsx)("svg",{className:"mx-auto h-8 sm:h-12 w-8 sm:w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 14v20c0 4.418 7.163 8 16 8 1.381 0 2.721-.087 4-.252M8 14c0 4.418 7.163 8 16 8s16-3.582 16-8M8 14c0-4.418 7.163-8 16-8s16 3.582 16 8m0 0v14m0-4c0 4.418-7.163 8-16 8S8 28.418 8 24m32 10v6m0 0v6m0-6h6m-6 0h-6"})}),(0,a.jsx)("input",{...J({onClick:e=>e.stopPropagation()})}),(0,a.jsx)("span",{className:"mt-2 sm:mt-2 block text-xs sm:text-sm font-semibold text-gray-100",children:e.length>0?e.map(e=>e.name).join(", "):"Drag and drop or click to select files to upload"})]})]}),(0,a.jsx)("div",{className:"mt-4 sm:mt-8 flex justify-end",children:(0,a.jsx)("button",{className:"rounded-md bg-indigo-500 px-2.5 sm:px-3.5 py-1.5 sm:py-2.5 text-center text-sm sm:text-base font-semibold text-white shadow-sm hover:bg-indigo-400 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-500",onClick:$,children:I||"Upload files"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("label",{htmlFor:"chunkSize",className:"block text-sm font-medium leading-6 text-gray-300",children:"Chunk size"}),(0,a.jsx)(u.Z,{className:"ml-2 h-5 w-5 text-gray-300 hover:text-gray-400 cursor-pointer",onClick:()=>W(!0)})]}),(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)("input",{type:"range",min:100,max:4e3,step:100,value:Z,onChange:e=>T(Number(e.target.value)),className:"w-full"}),(0,a.jsx)("div",{className:"text-center text-gray-100",children:Z})]})]}),(0,a.jsx)(c.Cw,{open:L,setOpen:W}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("label",{htmlFor:"overlapSize",className:"block text-sm font-medium leading-6 text-gray-300",children:"Overlap size"}),(0,a.jsx)(u.Z,{className:"ml-2 h-5 w-5 text-gray-300 cursor-pointer hover:text-gray-400",onClick:()=>B(!0)})]}),(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)("input",{type:"range",min:0,max:50,step:5,value:F,onChange:e=>M(Number(e.target.value)),className:"w-full"}),(0,a.jsxs)("div",{className:"text-center text-gray-100",children:[F,"%"]})]})]}),(0,a.jsx)(c.hX,{open:Y,setOpen:B}),I&&(0,a.jsx)("div",{className:"mt-4 sm:mt-8 grid grid-cols-1 gap-x-4 sm:gap-x-8 gap-y-4 sm:gap-y-6 sm:grid-cols-2",children:(0,a.jsxs)("div",{className:"sm:col-span-2",children:[(0,a.jsx)("label",{htmlFor:"email",className:"block text-sm font-semibold leading-6 text-white",children:"Namespace name"}),(0,a.jsx)("div",{className:"mt-2.5",children:(0,a.jsx)("input",{type:"text",className:"block w-full rounded-md border-0 bg-white/5 px-2 sm:px-3.5 py-1.5 sm:py-2 text-white shadow-sm ring-1 ring-inset ring-white/10 focus:ring-2 focus:ring-inset focus:ring-indigo-500 text-sm sm:text-base sm:leading-6 opacity-50",value:w,onChange:e=>k(e.target.value)})})]})}),w&&(0,a.jsx)("div",{className:"mt-4 sm:mt-8 flex justify-end",children:(0,a.jsx)("button",{className:"rounded-md bg-indigo-500 px-2.5 sm:px-3.5 py-1.5 sm:py-2.5 text-center text-sm sm:text-base font-semibold text-white shadow-sm hover:bg-indigo-400 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-500",onClick:ee,children:P?"Ingesting...":_||"Ingest"})})]})})]})})}}},function(e){e.O(0,[649,799,894,774,888,179],function(){return e(e.s=578)}),_N_E=e.O()}]);