(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{3127:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(3244)}])},3244:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return V}});var a=s(1527),r=s(959),l=s(3325),n=s(2559),i=s(6576),o=s(3815),c=s(2866),d=s(9496),m=s(2310);let u=e=>{let{loading:t,error:s,query:l,handleEnter:n,handleSubmit:i,setQuery:o}=e,c=(0,r.useRef)(null),u=(0,r.useCallback)(()=>{if(c.current){c.current.style.height="auto";let e=window.getComputedStyle(c.current),t=c.current.scrollHeight+parseInt(e.getPropertyValue("border-top-width"),10)+parseInt(e.getPropertyValue("padding-top"),10)+parseInt(e.getPropertyValue("padding-bottom"),10)+parseInt(e.getPropertyValue("border-bottom-width"),10);c.current.style.height=t>250?"250px":"".concat(t,"px")}},[c]);return(0,r.useEffect)(()=>{u()},[l,u]),(0,a.jsxs)("form",{onSubmit:i,className:"items-center w-screen justify-center flex p-4 sm:px-4 sm:py-10",children:[(0,a.jsx)("label",{htmlFor:"userInput",className:"sr-only",children:"Your message"}),(0,a.jsx)("div",{className:"flex w-full align-center justify-center max-w-3xl items-center rounded-lg bg-gray-170 shadow-2xl",children:(0,a.jsx)("textarea",{disabled:t,onKeyDown:n,ref:c,className:"flex items-center justify-center w-full text-xs sm:text-sm md:text-base rounded-lg border bg-gray-900 border-gray-700 placeholder-gray-400 text-white focus:outline-none resize-none whitespace-pre-wrap overflow-y-auto",autoFocus:!1,rows:1,maxLength:2048,id:"userInput",name:"userInput",placeholder:t?"Waiting for response...":s?"Error occurred. Try again.":"Your message...",value:l,onChange:e=>o(e.target.value)})}),(0,a.jsx)("button",{type:"submit",disabled:t,className:"inline-flex justify-center p-2 rounded-full cursor-pointer text-blue-500 hover:text-blue-300",children:t?(0,a.jsx)(a.Fragment,{}):s?(0,a.jsx)(d.Z,{className:"h-6 w-6 text-red-500"}):(0,a.jsx)(m.Z,{className:"h-6 w-6"})})]})};var x=s(4177);let h=e=>{let{nameSpaceHasChats:t,selectedNamespace:s,userHasNamespaces:r}=e,l=(0,x.useRouter)();return(0,a.jsxs)("div",{className:"flex flex-col justify-center px-4 pt-24",children:[(0,a.jsx)("h1",{className:"text-xl md:text-3xl text-center font-semibold text-gray-100 mb-6",children:r?s&&!t?"Create a new chat to get started.":"Select a namespace to display chats":"You currently have no namespaces."}),!r&&(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)("button",{type:"button",className:"rounded-md bg-indigo-500 px-3.5 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-indigo-400 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-500",onClick:()=>l.push("/settings"),children:"Create a namespace"})})]})};var g=s(2273),p=s(4740),f=s(4040),y=s(1118),b=s(3572);let j=f.fC,v=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(f.ck,{ref:t,className:(0,b.A)("border-t border-gray-700",s),...r})});v.displayName="AccordionItem";let N=r.forwardRef((e,t)=>{let{className:s,children:r,...l}=e;return(0,a.jsx)(f.h4,{className:"flex",children:(0,a.jsxs)(f.xz,{ref:t,className:(0,b.A)("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline text-gray-800 dark:text-white [&[data-state=open]>svg]:rotate-180",s),...l,children:[r,(0,a.jsx)(y.Z,{className:"h-4 w-4 transition-transform duration-200 text-gray-800 dark:text-white"})]})})});N.displayName=f.xz.displayName;let w=r.forwardRef((e,t)=>{let{className:s,children:r,...l}=e;return(0,a.jsx)(f.VY,{ref:t,className:(0,b.A)("pt-0 pb-4 text-sm transition-all text-gray-800 dark:text-white",s),...l,children:(0,a.jsx)("div",{className:"pt-0 pb-4",children:r})})});w.displayName=f.VY.displayName;var C=s(1877),k=function(e){let{messages:t,loading:s,messageListRef:r}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"overflow-y-auto",children:(0,a.jsx)("div",{ref:r,children:t.map((e,t)=>{let s="apiMessage"===e.type;return(0,a.jsx)("div",{className:" ".concat(s?"bg-gray-700/50":"bg-gray-800"),children:(0,a.jsx)("div",{className:"flex items-center justify-start max-w-full sm:max-w-4xl  mx-auto overflow-hidden px-2 sm:px-4",children:(0,a.jsxs)("div",{className:"flex flex-col w-full",children:[(0,a.jsxs)("div",{className:"w-full text-gray-300 p-2 sm:p-4 overflow-wrap break-words",children:[(0,a.jsx)("span",{className:"mt-2 inline-flex items-center rounded-md px-2 py-1 text-xs sm:text-sm font-medium ring-1 ring-inset ".concat(s?"bg-indigo-400/10 text-indigo-400 ring-indigo-400/30":"bg-purple-400/10 text-purple-400 ring-purple-400/30"),children:s?"AI":"YOU"}),(0,a.jsx)("div",{className:"mx-auto max-w-full",children:(0,a.jsx)(g.D,{linkTarget:"_blank",className:"markdown text-xs sm:text-sm md:text-base leading-relaxed",remarkPlugins:[C.Z],children:e.message})})]}),e.sourceDocs&&(0,a.jsx)("div",{className:"mt-4 mx-2 sm:mx-4",children:(0,a.jsx)(j,{type:"single",collapsible:!0,className:"flex flex-col",children:e.sourceDocs.map((e,t)=>(0,a.jsx)("div",{className:"mb-6 px-4 py-0 sm:py-1 bg-gray-700 rounded-lg shadow-md",children:(0,a.jsxs)(v,{value:"item-".concat(t),children:[(0,a.jsx)(N,{children:(0,a.jsxs)("h3",{className:"text-xs sm:text-sm md:text-base text-white",children:["Source ",t+1]})}),(0,a.jsx)(w,{className:"mt-2 overflow-wrap break-words",children:(0,a.jsx)(g.D,{linkTarget:"_blank",className:"markdown text-xs sm:text-sm md:text-base text-gray-300 leading-relaxed",remarkPlugins:[C.Z],children:e.pageContent.replace(RegExp("(?<=\\S)\\n","g"),"  \n")})})]})},"messageSourceDocs-".concat(t)))})},"sourceDocsAccordion-".concat(t))]})})},"chatMessage-".concat(t))})})}),s&&(0,a.jsx)("div",{className:"flex items-center justify-center h-32 w-full bg-gray-700/50",children:(0,a.jsx)("div",{className:"flex-shrink-0 p-1",children:(0,a.jsx)(p.xg,{color:"#04d9ff"})})})]})},S=s(3684);let T=e=>{let{buttonType:t,onClick:s,buttonText:r,icon:l}=e,n="inline-flex items-center gap-x-2 rounded-md px-3.5 py-2.5 text-sm font-semibold shadow-sm w-full";return"primary"===t?n+=" bg-indigo-600 text-white hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600":"secondary"===t&&(n+=" bg-gray-800 text-gray-400 hover:bg-gray-800 hover:text-white"),(0,a.jsxs)("button",{type:"button",className:n,onClick:s,children:[l&&(0,a.jsx)(l,{className:"h-5 w-5"}),r]})};var I=s(7893),F=s(8115);let D=e=>{let{filteredChatList:t,selectedChatId:s,setSelectedChatId:r,chatNames:l,updateChatName:n,deleteChat:i}=e,o=e=>{r(e)},c=(e,t)=>{e.stopPropagation();let s=prompt("Enter a new name for this chat:");s&&n(t,s)},d=(e,t)=>{e.stopPropagation(),i(t)};return(0,a.jsx)("ul",{role:"list",className:"-mx-2 mt-2 px-2 pb-6 space-y-1",children:[...t].reverse().map((e,r)=>(0,a.jsxs)("li",{className:(0,b.A)(e===s?"bg-gray-800 text-white":"text-gray-400 hover:text-white hover:bg-gray-800","group flex w-full gap-x-3 rounded-md p-2 text-sm leading-6 font-semibold cursor-pointer"),onClick:()=>o(e),children:[l[e]||"Chat ".concat(t.length-1-r),e===s&&(0,a.jsxs)("div",{className:"ml-auto",children:[(0,a.jsx)("button",{className:"text-gray-300 hover:text-gray-400 ml-2",onClick:t=>c(t,e),children:(0,a.jsx)(I.Z,{className:"h-4 w-4"})}),(0,a.jsx)("button",{className:"text-red-500 hover:text-red-600 ml-2",onClick:t=>d(t,e),children:(0,a.jsx)(F.Z,{className:"h-4 w-4"})})]})]},e))})};var E=s(3689),P=s(2949);let R=e=>{let{namespaces:t,selectedNamespace:s,setSelectedNamespace:n,isLoadingNamespaces:i}=e,o=e=>{n(e)};return(0,a.jsxs)(E.v,{as:"div",className:"w-full relative inline-block text-left",children:[(0,a.jsx)("div",{children:(0,a.jsx)(E.v.Button,{className:"inline-flex items-center w-full justify-center gap-x-1.5 rounded-md bg-gray-800 px-3 py-2 text-sm font-semibold text-white shadow-sm ring-1 ring-inset ring-gray-700 hover:bg-gray-700",children:i?(0,a.jsx)("span",{className:"relative",children:(0,a.jsx)(p.xg,{color:"#04d9ff",className:"absolute top-1/2 transform -translate-y-1/2"})}):(0,a.jsx)(a.Fragment,{children:0===t.length?(0,a.jsx)("span",{children:"No namespaces found"}):(0,a.jsxs)(a.Fragment,{children:[s,(0,a.jsx)(P.Z,{className:"-mr-1 h-5 w-5 text-gray-400","aria-hidden":"true"})]})})})}),(0,a.jsx)(l.u,{as:r.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:(0,a.jsx)(E.v.Items,{className:"absolute right-0 z-10 mt-2 w-full origin-top-right divide-y divide-gray-700 rounded-md bg-gray-800 shadow-lg ring-1 ring-gray-800 ring-opacity-5 focus:outline-none",children:t.map(e=>(0,a.jsx)("div",{className:"py-1",children:(0,a.jsx)(E.v.Item,{children:()=>(0,a.jsx)("p",{className:(0,b.A)(e===s?"bg-gray-700 text-white":"text-gray-400 hover:text-white hover:bg-gray-700","group flex gap-x-3 rounded-md p-2 text-sm leading-6 font-semibold"),onClick:()=>o(e),children:e})})},e))})})]})};var A=s(8245);let _=e=>{let{checked:t,setReturnSourceDocuments:s}=e;return(0,a.jsxs)(A.r.Group,{as:"div",className:"flex flex-row items-center justify-between align-center",children:[(0,a.jsx)("span",{className:"flex flex-col",children:(0,a.jsx)(A.r.Label,{as:"span",className:"text-xs sm:text-sm font-medium leading-6 text-blue-400",passive:!0,children:"Include source documents"})}),(0,a.jsx)(A.r,{checked:t,onChange:e=>{s(e)},className:(0,b.A)(t?"bg-indigo-600":"bg-gray-200","relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-indigo-600 focus:ring-offset-2"),children:(0,a.jsx)("span",{"aria-hidden":"true",className:(0,b.A)(t?"translate-x-5":"translate-x-0","pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out")})})]})},M=e=>{let{modelTemperature:t,setModelTemperature:s}=e,l=(0,r.useCallback)(e=>{s(parseFloat(e.target.value))},[s]);return(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block font-medium leading-6 text-xs sm:text-sm text-blue-400",children:"Model Temperature"}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("input",{type:"number",min:"0",max:"1",value:t,onChange:l,step:"0.1",name:"temperature",id:"temperature",className:"block w-full rounded-md bg-gray-800 text-gray-300 border-0 py-1.5 shadow-sm ring-1 ring-inset ring-gray-600 placeholder:text-gray-500 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",placeholder:"0.0 - 1.0",title:"Controls output randomness (0 to 1): lower is more predictable, higher is more creative."})})]})},Z=e=>{let{selectedNamespace:t,returnSourceDocuments:s,setReturnSourceDocuments:r,modelTemperature:l,setModelTemperature:n,filteredChatList:i,selectedChatId:o,createChat:c,setSelectedChatId:d,nameSpaceHasChats:m,chatNames:u,updateChatName:x,deleteChat:h,namespaces:g,setSelectedNamespace:p,isLoadingNamespaces:f}=e;return(0,a.jsxs)("nav",{className:"flex flex-col h-full",children:[(0,a.jsx)("div",{children:t&&(0,a.jsxs)("div",{className:"px-4 space-y-3 mb-4",children:[(0,a.jsx)(_,{checked:s,setReturnSourceDocuments:r}),(0,a.jsx)(M,{modelTemperature:l,setModelTemperature:n}),(0,a.jsx)(T,{buttonType:"primary",buttonText:"New chat",onClick:async()=>{let e=c();d(e)},icon:S.Z})]})}),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"px-4 w-full space-y-2 mb-6",children:[(0,a.jsx)("div",{className:"text-xs sm:text-sm font-semibold leading-6 text-blue-400",children:"Your namespaces"}),(0,a.jsx)(R,{isLoadingNamespaces:f,namespaces:g,selectedNamespace:t,setSelectedNamespace:p})]}),(0,a.jsx)("div",{className:"px-4 text-xs sm:text-sm font-semibold leading-6 text-blue-400",children:"Your chats"}),(0,a.jsx)("div",{className:"px-4 flex-grow overflow-y-auto",children:t&&m?(0,a.jsx)(D,{filteredChatList:i,selectedChatId:o,setSelectedChatId:d,chatNames:u,updateChatName:x,deleteChat:h}):(0,a.jsx)("div",{className:"text-xs font-semibold leading-6 text-red-400",children:t?"No chats in this namespace":"Select a namespace to display chats"})})]})]})};var O=s(1977),L=s(2798);let H=e=>{let{setSidebarOpen:t}=e,s=(0,x.useRouter)();return(0,a.jsxs)("div",{className:"sticky top-0 z-40 flex h-16 shrink-0 items-center gap-x-4 border-b border-gray-800 bg-gray-900 px-4 shadow-sm sm:gap-x-6 sm:px-6 lg:px-8 justify-between",children:[(0,a.jsxs)("button",{type:"button",className:"-m-2.5 p-2.5 text-gray-700 lg:hidden",onClick:()=>t(!0),children:[(0,a.jsx)("span",{className:"sr-only",children:"Open sidebar"}),(0,a.jsx)(O.Z,{className:"h-6 w-6","aria-hidden":"true"})]}),(0,a.jsx)("div",{className:"flex flex-1 gap-x-4 self-stretch lg:gap-x-6 items-center",children:(0,a.jsx)("span",{className:"flex-1 text-center items-center flex-shrink-0 rounded-md  px-2 py-1 text-xs sm:text-sm md:text-md md:text-lg font-medium text-blue-400",children:"DOC CHATBOT"})}),(0,a.jsx)("div",{className:"flex-shrink-0",onClick:()=>s.push("/settings"),children:(0,a.jsxs)("button",{type:"button",className:"inline-flex items-center gap-x-1.5 rounded-md bg-indigo-600 px-2.5 py-1.5 text-xs sm:text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",children:[(0,a.jsx)(L.Z,{className:"-ml-0.5 h-4 w-4 sm:w-5 sm:h-5","aria-hidden":"true"}),(0,a.jsx)("span",{children:"Settings"})]})})]})};function V(){let[e,t]=(0,r.useState)(!1),[s,d]=(0,r.useState)(""),[m,x]=(0,r.useState)(.5),[g,p]=(0,r.useState)(!1),{openAIapiKey:f,pineconeApiKey:y,pineconeEnvironment:b,pineconeIndexName:j}=(0,o.EX)(),{namespaces:v,selectedNamespace:N,setSelectedNamespace:w,isLoadingNamespaces:C}=(0,o.JR)(y,j,b),{chatList:S,selectedChatId:T,setSelectedChatId:I,createChat:F,deleteChat:D,chatNames:E,updateChatName:P,filteredChatList:R,getConversation:A,updateConversation:_}=(0,o.PD)(N),M=v.length>0,[O,L]=(0,r.useState)(!1),[V,Y]=(0,r.useState)(null),[X,z]=(0,r.useState)({messages:[{message:"Hi, what would you like to know about these documents?",type:"apiMessage"}],history:[]}),{messages:B,history:K}=X,q=(0,r.useRef)(null),J=(0,r.useRef)(null),G=(0,r.useCallback)(()=>{try{let e=A(T);if(!e||!e.messages){console.error("Failed to fetch chat history: No conversations found.");return}let t=[],s=e.messages;for(let e=0;e<s.length;e+=2)t.push([s[e],s[e+1]]);z(e=>({...e,messages:s.map(e=>{var t;return{type:"userMessage"===e.type?"userMessage":"apiMessage",message:e.message,sourceDocs:null===(t=e.sourceDocs)||void 0===t?void 0:t.map(e=>({pageContent:e.pageContent,metadata:{source:e.metadata.source}}))}}),history:t.map(e=>{let[t,s]=e;return[t.message,(null==s?void 0:s.message)||""]})}))}catch(e){console.error("Failed to fetch chat history:",e)}},[T,A]);async function Q(e){var t;if(e.preventDefault(),Y(null),!s){alert("Please input a question");return}let a=s.trim();z(e=>({...e,messages:[...e.messages,{type:"userMessage",message:a}]})),L(!0),d("");let r=A(T);if(!f||!y||!b||!j){console.error("API keys not found.");return}let l=await fetch("/document-chatbot/api/chat",{method:"POST",headers:{"Content-Type":"application/json","X-OpenAI-Key":f,"X-Pinecone-Key":y,"X-Pinecone-Environment":b,"X-Pinecone-Index-Name":j},body:JSON.stringify({question:a,history:r.history,selectedChatId:T,selectedNamespace:N,returnSourceDocuments:g,modelTemperature:m})}),n=await l.json();n.error?Y(n.error):z(e=>{let t={...e,messages:[...e.messages,{type:"apiMessage",message:n.text,sourceDocs:n.sourceDocuments?n.sourceDocuments.map(e=>new i.B({pageContent:e.pageContent,metadata:{source:e.metadata.source}})):void 0}],history:[...e.history,[a,n.text]]};return _(T,t),t}),L(!1),null===(t=q.current)||void 0===t||t.scrollTo(0,q.current.scrollHeight)}(0,r.useEffect)(()=>{N&&S.length>0&&!T&&I(S[0].chatId)},[N,S,T,I,f,y,b,j]),(0,r.useEffect)(()=>{S.length>0&&I(S[S.length-1].chatId)},[N,I,S,f,y,b,j]),(0,r.useEffect)(()=>{T&&G()},[T,G,f,y,b,j]),(0,r.useEffect)(()=>{var e;null===(e=J.current)||void 0===e||e.focus()},[]);let U=e=>{"Enter"===e.key&&s?Q(e):"Enter"==e.key&&e.preventDefault()},W=R.length>0;return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"h-full",children:[(0,a.jsx)(l.u.Root,{show:e,as:r.Fragment,children:(0,a.jsxs)(c.V,{as:"div",onClose:t,children:[(0,a.jsx)(l.u.Child,{as:r.Fragment,enter:"transition-opacity ease-linear duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"transition-opacity ease-linear duration-300",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,a.jsx)("div",{className:"fixed inset-0 bg-gray-900/80"})}),(0,a.jsx)("div",{className:"fixed inset-0 flex",children:(0,a.jsx)(l.u.Child,{as:r.Fragment,enter:"transition ease-in-out duration-300 transform",enterFrom:"-translate-x-full",enterTo:"translate-x-0",leave:"transition ease-in-out duration-300 transform",leaveFrom:"translate-x-0",leaveTo:"-translate-x-full",children:(0,a.jsxs)(c.V.Panel,{className:"relative mr-16 flex w-full max-w-xs flex-1",children:[(0,a.jsx)(l.u.Child,{as:r.Fragment,enter:"ease-in-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in-out duration-300",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,a.jsx)("div",{className:"absolute left-full top-0 flex w-16 justify-center pt-5",children:(0,a.jsxs)("button",{type:"button",className:"-m-2.5 p-2.5",onClick:()=>t(!1),children:[(0,a.jsx)("span",{className:"sr-only",children:"Close sidebar"}),(0,a.jsx)(n.Z,{className:"h-6 w-6 text-white","aria-hidden":"true"})]})})}),(0,a.jsxs)("div",{className:"flex grow flex-col gap-y-5 overflow-y-auto bg-gray-900 px-6 pb-4 ring-1 ring-white/10",children:[(0,a.jsx)("div",{className:"flex h-16 shrink-0 items-center"}),(0,a.jsx)(Z,{createChat:F,selectedNamespace:N,setSelectedNamespace:w,namespaces:v,filteredChatList:R.map(e=>e.chatId),selectedChatId:T,setSelectedChatId:I,chatNames:E,updateChatName:P,deleteChat:D,returnSourceDocuments:g,setReturnSourceDocuments:p,modelTemperature:m,setModelTemperature:x,nameSpaceHasChats:W,isLoadingNamespaces:C})]})]})})})]})}),(0,a.jsx)("div",{className:"hidden lg:fixed lg:inset-y-0 lg:z-50 lg:flex lg:w-72 lg:flex-col h-screen overflow-y-hidden",children:(0,a.jsxs)("div",{className:"flex grow flex-col bg-gray-900 pb-4 border-r border-gray-800 h-full",children:[(0,a.jsx)("div",{className:"flex h-8 shrink-0 items-center"}),(0,a.jsx)(Z,{createChat:F,selectedNamespace:N,setSelectedNamespace:w,namespaces:v,filteredChatList:R.map(e=>e.chatId),selectedChatId:T,setSelectedChatId:I,chatNames:E,updateChatName:P,deleteChat:D,returnSourceDocuments:g,setReturnSourceDocuments:p,modelTemperature:m,setModelTemperature:x,nameSpaceHasChats:W,isLoadingNamespaces:C})]})}),(0,a.jsxs)("div",{className:"lg:pl-72 h-screen",children:[(0,a.jsx)(H,{setSidebarOpen:t}),(0,a.jsxs)("main",{className:"flex flex-col",children:[""!==N&&W?(0,a.jsx)("div",{className:"flex-grow pb-36",children:(0,a.jsx)("div",{className:"h-full",children:(0,a.jsx)(k,{messages:B.map(function(e){var t;return{...e,sourceDocs:null===(t=e.sourceDocs)||void 0===t?void 0:t.map(e=>({pageContent:e.pageContent,metadata:{source:e.metadata.source}}))}}),loading:O,messageListRef:q})})}):(0,a.jsx)(h,{nameSpaceHasChats:W,selectedNamespace:N,userHasNamespaces:M}),W&&N&&(0,a.jsx)("div",{className:"fixed w-full bottom-0 flex bg-gradient-to-t from-gray-800 to-gray-800/0 justify-center lg:pr-72",children:(0,a.jsx)(u,{loading:O,error:V,query:s,textAreaRef:J,handleEnter:U,handleSubmit:Q,setQuery:d})})]})]})]})})}}},function(e){e.O(0,[649,331,894,774,888,179],function(){return e(e.s=3127)}),_N_E=e.O()}]);